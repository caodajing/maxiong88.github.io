<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>动态语言与闭包 | 雄大家</title>
    <meta name="description" content="摘自 js王者归来">
    
    
    <link rel="preload" href="/assets/css/0.styles.d26378bb.css" as="style"><link rel="preload" href="/assets/js/app.6a1c7d67.js" as="script"><link rel="preload" href="/assets/js/2.63e202d5.js" as="script"><link rel="preload" href="/assets/js/25.e2e9ffd9.js" as="script"><link rel="prefetch" href="/assets/js/10.45b3122b.js"><link rel="prefetch" href="/assets/js/11.ef1e40ed.js"><link rel="prefetch" href="/assets/js/12.fd10a6de.js"><link rel="prefetch" href="/assets/js/13.deeea89e.js"><link rel="prefetch" href="/assets/js/14.2750bbe8.js"><link rel="prefetch" href="/assets/js/15.3699038f.js"><link rel="prefetch" href="/assets/js/16.47b9f8b3.js"><link rel="prefetch" href="/assets/js/17.725f6bb8.js"><link rel="prefetch" href="/assets/js/18.b0157e81.js"><link rel="prefetch" href="/assets/js/19.6c67f5dc.js"><link rel="prefetch" href="/assets/js/20.0e515db8.js"><link rel="prefetch" href="/assets/js/21.43d7f922.js"><link rel="prefetch" href="/assets/js/22.dfea0c59.js"><link rel="prefetch" href="/assets/js/23.c3bc28d6.js"><link rel="prefetch" href="/assets/js/24.57db548b.js"><link rel="prefetch" href="/assets/js/26.e61851e1.js"><link rel="prefetch" href="/assets/js/27.be5d5f2c.js"><link rel="prefetch" href="/assets/js/28.ef903b6a.js"><link rel="prefetch" href="/assets/js/29.d65ee59a.js"><link rel="prefetch" href="/assets/js/3.018261d8.js"><link rel="prefetch" href="/assets/js/30.862d472d.js"><link rel="prefetch" href="/assets/js/31.a903b7be.js"><link rel="prefetch" href="/assets/js/32.17604038.js"><link rel="prefetch" href="/assets/js/33.b403c19c.js"><link rel="prefetch" href="/assets/js/34.2df7b623.js"><link rel="prefetch" href="/assets/js/35.04c1b42c.js"><link rel="prefetch" href="/assets/js/36.5775796d.js"><link rel="prefetch" href="/assets/js/37.6847ce80.js"><link rel="prefetch" href="/assets/js/38.956dd45b.js"><link rel="prefetch" href="/assets/js/39.d47fb572.js"><link rel="prefetch" href="/assets/js/4.539838e3.js"><link rel="prefetch" href="/assets/js/40.a460de13.js"><link rel="prefetch" href="/assets/js/41.5ad88ba8.js"><link rel="prefetch" href="/assets/js/42.a4740b36.js"><link rel="prefetch" href="/assets/js/43.22b59fb2.js"><link rel="prefetch" href="/assets/js/44.48fcb2a1.js"><link rel="prefetch" href="/assets/js/45.88b2df56.js"><link rel="prefetch" href="/assets/js/46.a4c14c43.js"><link rel="prefetch" href="/assets/js/47.ea4798bc.js"><link rel="prefetch" href="/assets/js/48.0cd6076d.js"><link rel="prefetch" href="/assets/js/49.13df7e3e.js"><link rel="prefetch" href="/assets/js/5.9f59a17f.js"><link rel="prefetch" href="/assets/js/50.6d65c345.js"><link rel="prefetch" href="/assets/js/51.06f54f5d.js"><link rel="prefetch" href="/assets/js/52.c91d91d2.js"><link rel="prefetch" href="/assets/js/53.de3c77b4.js"><link rel="prefetch" href="/assets/js/54.68e5267a.js"><link rel="prefetch" href="/assets/js/55.c852d2ba.js"><link rel="prefetch" href="/assets/js/56.d69fbe04.js"><link rel="prefetch" href="/assets/js/57.b45b29c6.js"><link rel="prefetch" href="/assets/js/58.69f6c5d4.js"><link rel="prefetch" href="/assets/js/59.43ab7236.js"><link rel="prefetch" href="/assets/js/6.04b98662.js"><link rel="prefetch" href="/assets/js/7.4446acf3.js"><link rel="prefetch" href="/assets/js/8.00ec34fe.js"><link rel="prefetch" href="/assets/js/9.a50c4a40.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d26378bb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">雄大家</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">博客</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">参考</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.h5anli.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  H5案例
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="/blog/.html" class="nav-link">vue-weibo</a></li><li class="dropdown-item"><!----> <a href="/blog/.html" class="nav-link">vue-cms</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">MEME</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">博客</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">参考</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.h5anli.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  H5案例
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="/blog/.html" class="nav-link">vue-weibo</a></li><li class="dropdown-item"><!----> <a href="/blog/.html" class="nav-link">vue-cms</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">MEME</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>动态语言与闭包</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/js-clourse.html#动态语言与闭包-closure" class="sidebar-link">动态语言与闭包(closure)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/js-clourse.html#动态语言与动态类型语言" class="sidebar-link">动态语言与动态类型语言</a></li><li class="sidebar-sub-header"><a href="/blog/js-clourse.html#语法域和执行域" class="sidebar-link">语法域和执行域</a></li><li class="sidebar-sub-header"><a href="/blog/js-clourse.html#js闭包" class="sidebar-link">js闭包</a></li><li class="sidebar-sub-header"><a href="/blog/js-clourse.html#闭包的内在-自治的领域" class="sidebar-link">闭包的内在----自治的领域</a></li><li class="sidebar-sub-header"><a href="/blog/js-clourse.html#访问外部环境" class="sidebar-link">访问外部环境</a></li></ul></li><li><a href="/blog/js-clourse.html#总结" class="sidebar-link">总结</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="content default"><h2 id="动态语言与闭包-closure"><a href="#动态语言与闭包-closure" aria-hidden="true" class="header-anchor">#</a> 动态语言与闭包(closure)</h2> <p>闭包成了编程语言的一个重要概念</p> <p>几乎所有的知名动态语言(php、c)都支持闭包，javascript也不例外</p> <p>一小段可重用的代码（一个可调用的函数）能够处理并可选地保留一个上下文。</p> <h3 id="动态语言与动态类型语言"><a href="#动态语言与动态类型语言" aria-hidden="true" class="header-anchor">#</a> 动态语言与动态类型语言</h3> <p><code>动态语言</code>指：程序在运行时可以改变其结构；新的函数可以被引进，已有的函数可以被删除等在结构上的变化。</p> <p>动态类型语言是指在运行期间才去发现数据类型的语言，++说的是数据类型++</p> <p>动态语言说的是运行是改变结构，++说的是代码结构++。</p> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>大多数动态语言都是动态类型语言，但动态语言本身并不要求一定是动态类型的，而动态类型语言也不一定是动态语言</p></div> <h3 id="语法域和执行域"><a href="#语法域和执行域" aria-hidden="true" class="header-anchor">#</a> 语法域和执行域</h3> <p>语法域,指定义某个程序段落时的区域</p> <p>执行域，指实际调用某个程序段落时所影响的区域</p> <div class="language-js extra-class"><pre class="language-js"><code>动态语言如js的函数不但能够访问语法域上的这些范围，还能访问它外层环境中的执行域范围

<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>
<span class="token comment">// 产生随机数函数</span>
<span class="token keyword">function</span> <span class="token function">RandomAlert</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">var</span> x <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token function">alert</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token function">RandomAlert</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">// 闭包的执行域随函数调用而创建</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token function">RandomAlert</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 一般情况下，a与b得到的数值不同</span>
<span class="token operator">--</span><span class="token operator">&gt;</span>

</code></pre></div><h3 id="js闭包"><a href="#js闭包" aria-hidden="true" class="header-anchor">#</a> js闭包</h3> <p>在程序语言中，闭包，指语法域位于某个特定的区域，具有持续参照位于该区域内自身范围之外的执行域上的非持久型变量值能力的段落。这些外部执行域的非持久型变量神奇地保留它们在闭包最初定义时的值</p> <p>从上可以看出，闭包通常是在动态语言中才有的概念，它是某些可以访问外部执行域的段落。</p> <p>js中的闭包，是通过定义在函数体内部的<code>function</code>来实现</p> <p>1.2中就是典型的闭包应用，RandomAlert函数的返回值是一个闭包，
a(), b() 分别访问了 闭包 两次被创建时 对应的外层RandomAlert()函数的执行域 上的局部变量x的值</p> <p>闭包跟函数关系，类似与一种动态和静态、结构和实例的关系</p> <h3 id="闭包的内在-自治的领域"><a href="#闭包的内在-自治的领域" aria-hidden="true" class="header-anchor">#</a> 闭包的内在----自治的领域</h3> <p>闭包的 闭 是指闭包的内部环境对外部不可见，
也就是说闭包具有控制外部域的能力但是又能防止
外部域对闭包的反向控制。换句话，<code>闭包的领域是对外封闭的</code>。</p> <p>此特点不用过多解释，因为js闭包是通过function实现的，
所以它天然具有基本的函数特征，在闭包内声明的变量，
闭包外的任何环境中都无法访问，除非闭包向外部环境提供了访问
他们的接口。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">dwn</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">{</span>
	document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
我们说匿名函数调用产生一个 <span class="token template-string"><span class="token string">`瞬时`</span></span> 的闭包
因此当调用结束后，私有变量无法访问，并且如果没有外部引用存在
内部对象就会被销毁<span class="token punctuation">.</span>
而如果反回了函数，或者被全局引用，则 闭包 被保留了下来
闭包中的内容被 有选择 <span class="token function">地开放出来</span>
<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token comment">// 封闭的私有域 私有变量</span>
	<span class="token keyword">var</span> unnerX <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span>innerY <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
	<span class="token comment">// 开放的公共域 全局变量</span>
	outerObj <span class="token operator">=</span> <span class="token punctuation">{</span>x <span class="token punctuation">:</span> innerX<span class="token punctuation">,</span> y <span class="token punctuation">:</span> innerY<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">try</span><span class="token punctuation">{</span>
	<span class="token function">dwn</span><span class="token punctuation">(</span>innerX<span class="token punctuation">)</span> <span class="token comment">// 内部数据无法访问</span>
<span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>ex<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token function">dwn</span><span class="token punctuation">(</span><span class="token string">'内部数据无法访问'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">dwn</span><span class="token punctuation">(</span>outerObj<span class="token punctuation">.</span><span class="token constant">X</span><span class="token punctuation">)</span> <span class="token comment">// 通过外部接口访问</span>

</code></pre></div><h3 id="访问外部环境"><a href="#访问外部环境" aria-hidden="true" class="header-anchor">#</a> 访问外部环境</h3> <p>闭包不但可以读外部变量，也可以写外部变量</p> <h2 id="总结"><a href="#总结" aria-hidden="true" class="header-anchor">#</a> 总结</h2> <ul><li>我们定义的函数，不管返不返回、不管有没有引用自由变量、不管自由变量是全局的还是局部的，都是闭包。闭包有自治的领域</li> <li>闭包不但可以读外部变量，也可以写外部变量</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.6a1c7d67.js" defer></script><script src="/assets/js/2.63e202d5.js" defer></script><script src="/assets/js/25.e2e9ffd9.js" defer></script>
  </body>
</html>
