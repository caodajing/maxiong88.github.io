<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>js 正则表达式 | 雄大家</title>
    <meta name="description" content="了解一下">
    
    
    <link rel="preload" href="/assets/css/0.styles.d26378bb.css" as="style"><link rel="preload" href="/assets/js/app.6a1c7d67.js" as="script"><link rel="preload" href="/assets/js/2.63e202d5.js" as="script"><link rel="preload" href="/assets/js/44.48fcb2a1.js" as="script"><link rel="prefetch" href="/assets/js/10.45b3122b.js"><link rel="prefetch" href="/assets/js/11.ef1e40ed.js"><link rel="prefetch" href="/assets/js/12.fd10a6de.js"><link rel="prefetch" href="/assets/js/13.deeea89e.js"><link rel="prefetch" href="/assets/js/14.2750bbe8.js"><link rel="prefetch" href="/assets/js/15.3699038f.js"><link rel="prefetch" href="/assets/js/16.47b9f8b3.js"><link rel="prefetch" href="/assets/js/17.725f6bb8.js"><link rel="prefetch" href="/assets/js/18.b0157e81.js"><link rel="prefetch" href="/assets/js/19.6c67f5dc.js"><link rel="prefetch" href="/assets/js/20.0e515db8.js"><link rel="prefetch" href="/assets/js/21.43d7f922.js"><link rel="prefetch" href="/assets/js/22.dfea0c59.js"><link rel="prefetch" href="/assets/js/23.c3bc28d6.js"><link rel="prefetch" href="/assets/js/24.57db548b.js"><link rel="prefetch" href="/assets/js/25.e2e9ffd9.js"><link rel="prefetch" href="/assets/js/26.e61851e1.js"><link rel="prefetch" href="/assets/js/27.be5d5f2c.js"><link rel="prefetch" href="/assets/js/28.ef903b6a.js"><link rel="prefetch" href="/assets/js/29.d65ee59a.js"><link rel="prefetch" href="/assets/js/3.018261d8.js"><link rel="prefetch" href="/assets/js/30.862d472d.js"><link rel="prefetch" href="/assets/js/31.a903b7be.js"><link rel="prefetch" href="/assets/js/32.17604038.js"><link rel="prefetch" href="/assets/js/33.b403c19c.js"><link rel="prefetch" href="/assets/js/34.2df7b623.js"><link rel="prefetch" href="/assets/js/35.04c1b42c.js"><link rel="prefetch" href="/assets/js/36.5775796d.js"><link rel="prefetch" href="/assets/js/37.6847ce80.js"><link rel="prefetch" href="/assets/js/38.956dd45b.js"><link rel="prefetch" href="/assets/js/39.d47fb572.js"><link rel="prefetch" href="/assets/js/4.539838e3.js"><link rel="prefetch" href="/assets/js/40.a460de13.js"><link rel="prefetch" href="/assets/js/41.5ad88ba8.js"><link rel="prefetch" href="/assets/js/42.a4740b36.js"><link rel="prefetch" href="/assets/js/43.22b59fb2.js"><link rel="prefetch" href="/assets/js/45.88b2df56.js"><link rel="prefetch" href="/assets/js/46.a4c14c43.js"><link rel="prefetch" href="/assets/js/47.ea4798bc.js"><link rel="prefetch" href="/assets/js/48.0cd6076d.js"><link rel="prefetch" href="/assets/js/49.13df7e3e.js"><link rel="prefetch" href="/assets/js/5.9f59a17f.js"><link rel="prefetch" href="/assets/js/50.6d65c345.js"><link rel="prefetch" href="/assets/js/51.06f54f5d.js"><link rel="prefetch" href="/assets/js/52.c91d91d2.js"><link rel="prefetch" href="/assets/js/53.de3c77b4.js"><link rel="prefetch" href="/assets/js/54.68e5267a.js"><link rel="prefetch" href="/assets/js/55.c852d2ba.js"><link rel="prefetch" href="/assets/js/56.d69fbe04.js"><link rel="prefetch" href="/assets/js/57.b45b29c6.js"><link rel="prefetch" href="/assets/js/58.69f6c5d4.js"><link rel="prefetch" href="/assets/js/59.43ab7236.js"><link rel="prefetch" href="/assets/js/6.04b98662.js"><link rel="prefetch" href="/assets/js/7.4446acf3.js"><link rel="prefetch" href="/assets/js/8.00ec34fe.js"><link rel="prefetch" href="/assets/js/9.a50c4a40.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d26378bb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">雄大家</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">博客</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">参考</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.h5anli.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  H5案例
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="/blog/.html" class="nav-link">vue-weibo</a></li><li class="dropdown-item"><!----> <a href="/blog/.html" class="nav-link">vue-cms</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">MEME</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">博客</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">参考</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.h5anli.com/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  H5案例
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="/blog/.html" class="nav-link">vue-weibo</a></li><li class="dropdown-item"><!----> <a href="/blog/.html" class="nav-link">vue-cms</a></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">MEME</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>js 正则表达式</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/js-regexp.html#括号作用" class="sidebar-link">括号作用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/js-regexp.html#_1-分组和分支结构" class="sidebar-link">1.分组和分支结构</a></li><li class="sidebar-sub-header"><a href="/blog/js-regexp.html#_2-引用分组" class="sidebar-link">2.引用分组</a></li><li class="sidebar-sub-header"><a href="/blog/js-regexp.html#_3-反向引用" class="sidebar-link">3. 反向引用</a></li></ul></li><li><a href="/blog/js-regexp.html#" class="sidebar-link">| ()</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/js-regexp.html#创建一个正则表达式" class="sidebar-link">创建一个正则表达式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/js-regexp.html#修改于20170329" class="sidebar-link">修改于20170329</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="content default"><h2 id="括号作用"><a href="#括号作用" aria-hidden="true" class="header-anchor">#</a> 括号作用</h2> <h3 id="_1-分组和分支结构"><a href="#_1-分组和分支结构" aria-hidden="true" class="header-anchor">#</a> 1.分组和分支结构</h3> <h4 id="_1-1分组"><a href="#_1-1分组" aria-hidden="true" class="header-anchor">#</a> 1.1分组</h4> <p>我们知道/a+/匹配连续出现的“a”，而要匹配连续出现的“ab”时，需要使用/(ab)+/。</p> <p>其中括号是提供分组功能，使量词“+”作用于“ab”这个整体，测试如下：</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/(ab)+/g</span><span class="token punctuation">;</span> <span class="token comment">// 加了括号匹配的ab</span>
<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;ababa abbb ababab&quot;</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;abab&quot;, &quot;ab&quot;, &quot;ababab&quot;]</span>

<span class="token keyword">var</span> regex1 <span class="token operator">=</span> <span class="token regex">/ab+/g</span><span class="token punctuation">;</span> <span class="token comment">// 不加匹配的一个a多个b</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex1<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;ab&quot;, &quot;ab&quot;, &quot;abbb&quot;, &quot;ab&quot;, &quot;ab&quot;, &quot;ab&quot;]</span>

<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">'asd[asdf]dsfsdf[eee]sadfasd[555]'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> regex2 <span class="token operator">=</span> <span class="token regex">/\[(.+?)\]/g</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [&quot;[asdf]&quot;, &quot;[eee]&quot;, &quot;[555]&quot;]</span>

</code></pre></div><h4 id="_1-2-分支结构"><a href="#_1-2-分支结构" aria-hidden="true" class="header-anchor">#</a> 1.2 分支结构</h4> <p>而在多选分支结构(p1|p2)中，此处括号的作用也是不言而喻的，提供了子表达式的所有可能。</p> <p>比如，要匹配如下的字符串：</p> <blockquote><p>I love JavaScript
I love Regular Expression</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/^I love (JavaScript|Regular Expression)$/</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;I love JavaScript&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;I love Regular Expression&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

</code></pre></div><p>如果去掉正则中的括号，即/^I love JavaScript|Regular Expression$/，</p> <p>匹配字符串是&quot;I love JavaScript&quot;和&quot;Regular Expression&quot;，当然这不是我们想要的。</p> <h3 id="_2-引用分组"><a href="#_2-引用分组" aria-hidden="true" class="header-anchor">#</a> 2.引用分组</h3> <p>这是括号一个重要的作用，有了它，我们就可以进行数据提取，以及更强大的替换操作。</p> <p>而要使用它带来的好处，必须配合使用实现环境的API。</p> <p>以日期为例。假设格式是yyyy-mm-dd的，我们可以先写一个简单的正则：</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/\d{4}-\d{2}-\d{2}/</span><span class="token punctuation">;</span>

</code></pre></div><p>然后再修改成括号版的：</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">var</span> regex <span class="token operator">=</span>  <span class="token regex">/(\d{4})-(\d{2})-(\d{2})/</span><span class="token punctuation">;</span>

</code></pre></div><p>为什么要使用这个正则呢？</p> <h4 id="_2-1-提取数据"><a href="#_2-1-提取数据" aria-hidden="true" class="header-anchor">#</a> 2.1 提取数据</h4> <p>比如提取出年、月、日，可以这么做：</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/(\d{4})-(\d{2})-(\d{2})/</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> regex1 <span class="token operator">=</span> <span class="token regex">/(\d{4})-(\d{2})-(\d{2})/g</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;2017-06-12&quot;</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// =&gt; [&quot;2017-06-12&quot;, &quot;2017&quot;, &quot;06&quot;, &quot;12&quot;, index: 0, input: &quot;2017-06-12&quot;]</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> string<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regex1<span class="token punctuation">)</span> <span class="token punctuation">)</span>
<span class="token comment">// =&gt; [&quot;2017-06-12&quot;]</span>

</code></pre></div><p>match返回的一个数组，第一个元素是整体匹配结果，然后是各个分组（括号里）匹配的内容，然后是匹配下标，最后是输入的文本。</p> <div class="tip custom-block"><p class="custom-block-title">注意</p> <p>在全局检索模式下，match() 即不提供与子表达式匹配的文本的信息，也不声明每个匹配子串的位置。</p> <p>如果您需要这些全局检索的信息，可以使用 RegExp.exec()。</p></div> <p>另外也可以使用正则对象的exec方法：</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/(\d{4})-(\d{2})-(\d{2})/</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;2017-06-12&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> regex<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token comment">// =&gt; [&quot;2017-06-12&quot;, &quot;2017&quot;, &quot;06&quot;, &quot;12&quot;, index: 0, input: &quot;2017-06-12&quot;]</span>

</code></pre></div><p>同时，也可以使用构造函数的全局属性$1至$9来获取：</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/(\d{4})-(\d{2})-(\d{2})/</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;2017-06-12&quot;</span><span class="token punctuation">;</span>

regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>string<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 正则操作即可，例如</span>
<span class="token comment">//regex.exec(string);</span>
<span class="token comment">//string.match(regex);</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>RegExp<span class="token punctuation">.</span>$<span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;2017&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>RegExp<span class="token punctuation">.</span>$<span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;06&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>RegExp<span class="token punctuation">.</span>$<span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;12&quot;</span>

</code></pre></div><h4 id="_2-2-替换"><a href="#_2-2-替换" aria-hidden="true" class="header-anchor">#</a> 2.2 替换</h4> <p>比如，想把yyyy-mm-dd格式，替换成mm/dd/yyyy怎么做？</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/(\d{4})-(\d{2})-(\d{2})/</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;2017-06-12&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> string<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>regex<span class="token punctuation">,</span> <span class="token string">&quot;$2/$3/$1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;06/12/2017&quot;</span>

</code></pre></div><p>其中replace中的，第二个参数里用$1、$2、$3指代相应的分组。等价于如下的形式：</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/(\d{4})-(\d{2})-(\d{2})/</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;2017-06-12&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> string<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>regex<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> RegExp<span class="token punctuation">.</span>$<span class="token number">2</span> <span class="token operator">+</span> <span class="token string">&quot;/&quot;</span> <span class="token operator">+</span> RegExp<span class="token punctuation">.</span>$<span class="token number">3</span> <span class="token operator">+</span> <span class="token string">&quot;/&quot;</span> <span class="token operator">+</span> RegExp<span class="token punctuation">.</span>$<span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;06/12/2017&quot;</span>

</code></pre></div><p>也等价于：</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/(\d{4})-(\d{2})-(\d{2})/</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string <span class="token operator">=</span> <span class="token string">&quot;2017-06-12&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> string<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>regex<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>match<span class="token punctuation">,</span> year<span class="token punctuation">,</span> month<span class="token punctuation">,</span> day<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> month <span class="token operator">+</span> <span class="token string">&quot;/&quot;</span> <span class="token operator">+</span> day <span class="token operator">+</span> <span class="token string">&quot;/&quot;</span> <span class="token operator">+</span> year<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &quot;06/12/2017&quot;</span>

</code></pre></div><h3 id="_3-反向引用"><a href="#_3-反向引用" aria-hidden="true" class="header-anchor">#</a> 3. 反向引用</h3> <p>除了使用相应API来引用分组，也可以在正则本身里引用分组。但只能引用之前出现的分组，即反向引用。</p> <p>还是以日期为例。</p> <p>比如要写一个正则支持匹配如下三种格式：</p> <blockquote><p>2016-06-12
2016/06/12
2016.06.12</p></blockquote> <p>最先可能想到的正则是:</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/\d{4}(-|\/|\.)\d{2}(-|\/|\.)\d{2}/</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string1 <span class="token operator">=</span> <span class="token string">&quot;2017-06-12&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string2 <span class="token operator">=</span> <span class="token string">&quot;2017/06/12&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string3 <span class="token operator">=</span> <span class="token string">&quot;2017.06.12&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string4 <span class="token operator">=</span> <span class="token string">&quot;2016-06/12&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>string1<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>string2<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>string3<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>string4<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

</code></pre></div><p>其中/和.需要转义。虽然匹配了要求的情况，但也匹配&quot;2016-06/12&quot;这样的数据。</p> <p>假设我们想要求分割符前后一致怎么办？此时需要使用反向引用：</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">var</span> regex <span class="token operator">=</span> <span class="token regex">/\d{4}(-|\/|\.)\d{2}\1\d{2}/</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string1 <span class="token operator">=</span> <span class="token string">&quot;2017-06-12&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string2 <span class="token operator">=</span> <span class="token string">&quot;2017/06/12&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string3 <span class="token operator">=</span> <span class="token string">&quot;2017.06.12&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> string4 <span class="token operator">=</span> <span class="token string">&quot;2016-06/12&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>string1<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>string2<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>string3<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span> regex<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>string4<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>

</code></pre></div><p>注意里面的\1，表示的引用之前的那个分组(-|/|.)。不管它匹配到什么（比如-），\1都匹配那个同样的具体某个字符。</p> <p>我们知道了\1的含义后，那么\2和\3的概念也就理解了，即分别指代第二个和第三个分组。</p> <p>看到这里，此时，恐怕你会有三个问题。</p> <h5 id="_3-1-括号嵌套怎么办？"><a href="#_3-1-括号嵌套怎么办？" aria-hidden="true" class="header-anchor">#</a> 3.1 括号嵌套怎么办？</h5> <h2 id=""><a href="#" aria-hidden="true" class="header-anchor">#</a> | ()</h2> <p><code>影响表达式的子表达式之间的关系：</code></p> <ul><li><p><code>|</code> 左右两边表达式之间“或”关系，匹配左边或者右边</p></li> <li><p><code>()</code></p> <ul><li>在被修饰匹配次数的时候，括号中的表达式可以作为整体被修饰</li> <li>取匹配结果的时候，括号中的表达式匹配到的内容可以被单独得到</li></ul></li></ul> <h4 id="举例"><a href="#举例" aria-hidden="true" class="header-anchor">#</a> 举例</h4> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token string">&quot;I'm Tom, he is Jack&quot;</span><span class="token punctuation">;</span>

s<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/Tom|Jack/gi</span><span class="token punctuation">)</span>

<span class="token comment">//  [&quot;Tom&quot;, &quot;Jack&quot;]</span>

</code></pre></div><p>正则表达式是用于匹配字符串中字符组合的模式。</p> <p>在JavaScript 中，正则表达式也是对象。</p> <p>这些模式被用于 RegExp 的 exec 和 test 方法以及 String 的 match、replace、search 和 split 方法</p> <p>\ 做为转意，即通常在&quot;&quot;后面的字符不按原来意义解释，如/b/匹配字符&quot;b&quot;，当b前面加了反斜杆后/\b/，转意为匹配一个单词的边界。</p> <p>对正则表达式功能字符的还原，如&quot;<em>&quot;匹配它前面元字符0次或多次，/a</em>/将匹配a,aa,aaa，加了&quot;&quot;后，/a*/将只匹配&quot;a*&quot;。</p> <h2 id="创建一个正则表达式"><a href="#创建一个正则表达式" aria-hidden="true" class="header-anchor">#</a> 创建一个正则表达式</h2> <h6 id="使用一个正则表达式字面量，适用于正则表达式是常量"><a href="#使用一个正则表达式字面量，适用于正则表达式是常量" aria-hidden="true" class="header-anchor">#</a> 使用一个正则表达式字面量，适用于正则表达式是常量</h6> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> re <span class="token operator">=</span> <span class="token regex">/ab+c/</span>
</code></pre></div><h6 id="调用regexp对象的构造函数"><a href="#调用regexp对象的构造函数" aria-hidden="true" class="header-anchor">#</a> 调用RegExp对象的构造函数</h6> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> re <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token string">&quot;ab+c&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p>使用构造函数，提供了对正则表达式运行时的编译。当你知道正则表达式的模式会发生改变， 或者你事先并不了解它的模式或者是从其他地方（比如用户的输入），得到的代码这时比较适合用构造函数的方式。</p> <h5 id="特殊字符"><a href="#特殊字符" aria-hidden="true" class="header-anchor">#</a> 特殊字符</h5> <ul><li>^ 匹配一个输入或一行的开头 /^a/.test(&quot;an A&quot;) true; /^a/.test(&quot;An a&quot;) false</li> <li>$ 匹配一个输入或一行的结尾 /a$/.test(&quot;an A&quot;) false; /a$/.test(&quot;An a&quot;) true</li> <li><ul><li>匹配签一个表达式0此或多次，等价于{0,}</li></ul></li> <li><ul><li>匹配前面一个表达式1此或多次，等价于{1,}</li></ul></li> <li>? 匹配前面一个表达式0次或者1次，等价于{0,1}</li> <li>. 匹配除了换行符(\n)之外的任何单个字符</li></ul> <ul><li>(X) 匹配x并且记住匹配项.叫做<code>捕获括号</code></li> <li>(?:x) 匹配x但是不记住匹配项，只做为匹配，不返回结果.叫做<code>非捕获括号</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">var</span> regular <span class="token operator">=</span> <span class="token regex">/^Subject:(?:\d)/</span>
<span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">&quot;Subject:1 as something&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> regular<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// [&quot;Subject:1&quot;, index: 0, input: &quot;Subject:1 as something&quot;, groups: undefined]</span>

<span class="token keyword">var</span> regular <span class="token operator">=</span> <span class="token regex">/^Subject:(\d)/</span>
<span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">&quot;Subject:1 as something&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> regular<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// (2) [&quot;Subject:1&quot;, &quot;1&quot;, index: 0, input: &quot;Subject:1 as something&quot;, groups: undefined]</span>

</code></pre></div><ul><li>x(?=y) 匹配x仅仅当x后面跟着y，正向肯定查找</li> <li>x(?!y) 匹配x仅仅当x后面不跟着y，正向否定查找</li> <li>x|y 匹配x或者y</li> <li>{n} 匹配前面一个字符刚好发生了n次，n是正整数</li> <li>{n,m} 匹配前面的字符至少n次，最多m次</li> <li>[xyz] 匹配方括号中任意字符</li> <li>[^xyz] 匹配任何没有包含在方括号中的字符</li> <li>[\b] 匹配一个退格</li> <li>\b 匹配一个词的边界
<ul><li>/\bm/匹配“moon”中得‘m’；</li> <li>/oo\b/并不匹配&quot;moon&quot;中得'oo'，因为'oo'被一个词汇字符'n'紧跟着。</li> <li>/oon\b/匹配&quot;moon&quot;中得'oon'，因为'oon'是这个字符串的结束部分。这样他没有被一个词汇字符紧跟着。</li> <li>/\w\b\w/将不能匹配任何字符串，因为一个单词中的字符永远也不可能被一个非词汇字符和一个词汇字符同时紧跟着</li></ul></li> <li>\B 匹配一个非单词边界
<ul><li>/\B../匹配&quot;noonday&quot;中得'oo', 而/y\B./匹配&quot;possibly yesterday&quot;中得’ye‘</li></ul></li> <li>\d 匹配一个数组 [0-9]</li> <li>\D 匹配一个非数字自负 [^0-9]</li> <li>\f 匹配一个换页符</li> <li>\n 匹配一个换行符</li> <li>\r 匹配一个回车符</li> <li>\s 匹配一个空白字符</li> <li>\S 匹配一个非空白字符</li> <li>\w 匹配一个单子字符 [A-Za-z0-9]</li> <li>\W 匹配一个非单子字符 [^A-Za-z0-9]</li> <li>\n 当n是一个正整数，一个返回引用到最后一个与有n插入的正值表达式匹配的富字符窜</li> <li>\0 匹配null字符</li> <li>\xhh 匹配带有两位小数代码(hh)的字符</li> <li>\xhhhh 匹配带有四位小数代码(hh)的字符</li></ul> <h5 id="正则表达式方法"><a href="#正则表达式方法" aria-hidden="true" class="header-anchor">#</a> 正则表达式方法</h5> <ul><li>exec 一个在字符窜中执行查找匹配的RegExp方法，他返回一个数组（未匹配到则返回null）</li> <li>test 一个字符窜中测试是否匹配的RegExp方法，他返回true或false</li> <li>match 一个在字符窜中执行查找匹配的String方法，他返回一个数组（未匹配到则返回null）</li> <li>search 一个在字符窜中检测匹配的String方法，他返回匹配到的位置索引（失败返回-1）</li> <li>replace 一个在字符窜中执行查找匹配的String方法，并且使用替换字符窜替换匹配掉的子字符窜</li> <li>split 一个使用正则表达式或者一个固定字符窜分割一个字符窜，并将分割后的子字符窜存储倒数组中的string方法</li></ul> <p><code>当你想要知道再一个字符窜中的一个匹配是否被找到，你可以使用test或search方法</code></p> <p><code>想得到更多的信息则可以使用exec或match方法</code></p> <h5 id="正则表达式标志"><a href="#正则表达式标志" aria-hidden="true" class="header-anchor">#</a> 正则表达式标志</h5> <ul><li>g 全局搜索</li> <li>i 不区分大小写搜索</li> <li>m 多行搜索</li> <li>y 执行“粘性”搜索,匹配从目标字符串的当前位置开始，可以使用y标志。</li></ul> <h5 id="_1-1"><a href="#_1-1" aria-hidden="true" class="header-anchor">#</a> $1 \1</h5> <p>$1-$9存放着正则表达式中最近的9个表达式的提取结果，这些结果按照匹配的出现顺序依次排列
基本语法是 RegExp.$n 这些属性是静态的除了replace中的第二个参数可以省略RegExp之外没其他地方都要加上RegExp</p> <div class="language-js extra-class"><pre class="language-js"><code>在regexp 中访问
<span class="token keyword">var</span> a1 <span class="token operator">=</span> <span class="token regex">/(\d+)-(\d+)-(\d+)/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;2016-03-26&quot;</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a1<span class="token punctuation">)</span>
<span class="token comment">// true</span>
RegExp<span class="token punctuation">.</span>$<span class="token number">1</span>
<span class="token comment">// 2016</span>
RegExp<span class="token punctuation">.</span>$<span class="token number">2</span>
<span class="token comment">// 03</span>
RegExp<span class="token punctuation">.</span>$<span class="token number">3</span>
<span class="token comment">// 26</span>

在replace中使用
<span class="token string">&quot;2016-03-26&quot;</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/(\d+)-(\d+)-(\d+)/</span><span class="token punctuation">,</span><span class="token string">&quot;$1年$2月$3日&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// 2016年03月26日</span>

\<span class="token number">1</span> <span class="token function">表示后向引用，是指在正则表达式中，从左往右数，第1个</span><span class="token punctuation">(</span><span class="token punctuation">)</span>中的内容，以此类推，\<span class="token number">2</span><span class="token function">表示第2个</span><span class="token punctuation">(</span><span class="token punctuation">)</span>，\<span class="token number">0</span>表示整个表达式。

<span class="token keyword">var</span> rgx <span class="token operator">=</span> <span class="token regex">/\d{4}(\-|\/|.)\d{1,2}\1\d{1,2}/</span>
</code></pre></div><h4 id="应用"><a href="#应用" aria-hidden="true" class="header-anchor">#</a> 应用</h4> <div class="language-js extra-class"><pre class="language-js"><code>stringObject<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>searchvalue<span class="token punctuation">)</span> <span class="token comment">// 需要检索的字符窜</span>
stringObject<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>regexp<span class="token punctuation">)</span> <span class="token comment">// 要匹配的模式的RegExp对象</span>

<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>

<span class="token keyword">var</span> str<span class="token operator">=</span><span class="token string">&quot;Hello world!&quot;</span>
document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token string">&quot;world&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&lt;br /&gt;&quot;</span><span class="token punctuation">)</span>
document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token string">&quot;World&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&lt;br /&gt;&quot;</span><span class="token punctuation">)</span>
document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token string">&quot;worlld&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;&lt;br /&gt;&quot;</span><span class="token punctuation">)</span>
document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token string">&quot;world!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

world
<span class="token keyword">null</span>
<span class="token keyword">null</span>
world<span class="token operator">!</span>

<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>

<span class="token keyword">var</span> str<span class="token operator">=</span><span class="token string">&quot;1 plus 2 equal 3&quot;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/\d+/g</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// [1,2,3] 输出数组</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>



stringObject<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>regexp<span class="token operator">/</span>substr<span class="token punctuation">,</span>replacement<span class="token punctuation">)</span>
<span class="token comment">// 1参数 规定子字符窜或要替换的模式RegExp对象</span>
<span class="token comment">// 2参数 一个字符窜值，规定了替换文本或生成替换文本的函数</span>

<span class="token operator">&lt;</span>script type<span class="token operator">=</span><span class="token string">&quot;text/javascript&quot;</span><span class="token operator">&gt;</span>

<span class="token keyword">var</span> str<span class="token operator">=</span><span class="token string">&quot;Visit Microsoft!&quot;</span>
document<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/Microsoft/</span><span class="token punctuation">,</span> <span class="token string">&quot;W3School&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// Visit W3School!</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>

我们将把 <span class="token string">&quot;Doe, John&quot;</span> 转换为 <span class="token string">&quot;John Doe&quot;</span> 的形式：
name <span class="token operator">=</span> <span class="token string">&quot;Doe, John&quot;</span><span class="token punctuation">;</span>
name<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/(\w+)\s*, \s*(\w+)/</span><span class="token punctuation">,</span> <span class="token string">&quot;$2 $1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

我们将把所有的花引号替换为直引号：
name <span class="token operator">=</span> <span class="token string">'&quot;a&quot;, &quot;b&quot;'</span><span class="token punctuation">;</span>
name<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/&quot;([^&quot;]*)&quot;/g</span><span class="token punctuation">,</span> <span class="token string">&quot;'$1'&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

我们将把字符串中所有单词的首字母都转换为大写：
name <span class="token operator">=</span> <span class="token string">'aaa bbb ccc'</span><span class="token punctuation">;</span>
uw<span class="token operator">=</span>name<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/\b\w+\b/g</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>word<span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">return</span> word<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">+</span>word<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="应用实例"><a href="#应用实例" aria-hidden="true" class="header-anchor">#</a> 应用实例</h4> <h6 id="js-正则判断判断移动端"><a href="#js-正则判断判断移动端" aria-hidden="true" class="header-anchor">#</a> js 正则判断判断移动端</h6> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token regex">/(iphone|iPad|iPod|iOS)/i</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href<span class="token operator">=</span><span class="token string">&quot;&quot;</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>navigator<span class="token punctuation">.</span>userAgent<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/iphone/i</span><span class="token punctuation">)</span><span class="token operator">==</span><span class="token string">&quot;iphone&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// true</span>
</code></pre></div><h6 id="用javascript替换url中的参数"><a href="#用javascript替换url中的参数" aria-hidden="true" class="header-anchor">#</a> 用javascript替换url中的参数</h6> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token keyword">function</span> <span class="token function">changeUrlArg</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span>arg<span class="token punctuation">,</span>val<span class="token punctuation">)</span><span class="token punctuation">{</span>
	
	<span class="token keyword">var</span> pattern <span class="token operator">=</span> arg<span class="token operator">+</span><span class="token string">'=([^&amp;]*)'</span><span class="token punctuation">;</span>
	
	<span class="token keyword">var</span> replaceText <span class="token operator">=</span> arg<span class="token operator">+</span><span class="token string">'='</span><span class="token operator">+</span>val<span class="token punctuation">;</span>

	<span class="token keyword">if</span><span class="token punctuation">(</span>url<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>pattern<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	
		<span class="token keyword">return</span> url<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">'/('</span><span class="token operator">+</span>arg<span class="token operator">+</span><span class="token string">'=)([^&amp;]*)/gi'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>replaceText<span class="token punctuation">)</span>

	<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
		
		<span class="token keyword">if</span><span class="token punctuation">(</span>url<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token string">'[\?]'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	
			<span class="token keyword">return</span> url<span class="token operator">+</span><span class="token string">'&amp;'</span><span class="token operator">+</span>replaceText

		<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
	
			<span class="token keyword">return</span> url<span class="token operator">+</span><span class="token string">'?'</span><span class="token operator">+</span>replaceText

		<span class="token punctuation">}</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>


<span class="token comment">// url 目标url</span>

<span class="token comment">// param 需要替换的参数名称</span>

<span class="token comment">// paramVal 替换以后参数值</span>

<span class="token comment">// 返回新的url</span>

<span class="token keyword">function</span> <span class="token function">changUrl</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span>param<span class="token punctuation">,</span>paramVal<span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">var</span> newAddUrl <span class="token operator">=</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">;</span>
	<span class="token keyword">var</span> tempArray <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;?&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 字符串转数组</span>
	<span class="token keyword">var</span> baseUrl <span class="token operator">=</span> tempArray<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">// 主机名</span>
	<span class="token keyword">var</span> addUrl <span class="token operator">=</span> tempArray<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token comment">// 参数</span>

	<span class="token keyword">var</span> temp <span class="token operator">=</span> <span class="token string">&quot;&quot;</span>

	<span class="token keyword">if</span><span class="token punctuation">(</span>addUrl<span class="token punctuation">)</span><span class="token punctuation">{</span>
		tempArray <span class="token operator">=</span> addUrl<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;&amp;&quot;</span><span class="token punctuation">)</span>
		<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span>tempArray<span class="token punctuation">.</span>length<span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">if</span><span class="token punctuation">(</span>tempArray<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'='</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">==</span>param<span class="token punctuation">)</span><span class="token punctuation">{</span>
				newAddurl <span class="token operator">+=</span> temp <span class="token operator">+</span> tempArray<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
				temp <span class="token operator">=</span> <span class="token string">&quot;&amp;&quot;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">var</span> rows_txt <span class="token operator">=</span> temp <span class="token operator">+</span> <span class="token string">&quot;&quot;</span> <span class="token operator">+</span>param <span class="token operator">+</span> <span class="token string">&quot;=&quot;</span> <span class="token operator">+</span> paramVal<span class="token punctuation">;</span>
	<span class="token keyword">return</span> baseUrl <span class="token operator">+</span> <span class="token string">&quot;?&quot;</span> <span class="token operator">+</span>newAddUrl <span class="token operator">+</span> rows_txt
<span class="token punctuation">}</span>
</code></pre></div><p>正则：</p> <p>RegExp 对象</p> <p>RegExp 对象表示正则表达式，它是对字符串执行模式匹配的强大工具</p> <p>直接量语法：</p> <p>/pattern/attributes</p> <p>创建RegExp对象的语法：</p> <p>new RegExp(pattren,attributes)</p> <p>参数：</p> <p>参数pattern是一个字符串，指定了正则表达式的模式或其他正则表达式</p> <p>参数attributes是一个可选字符串，包含属性g（全局匹配）、i（区分大小写）、m（多行匹配）</p> <p>返回值：</p> <p>一个新的RegExp对象，具有指定的模式和标志，如果参数pattern是正则表达式而不是字符串</p> <p>那么RegExp()构造函数将用与指定的RegExp相同模式和标志创建一个新的RegExp对象</p> <p>如果不用new运算符，而将regexp()作为函数调用，那么他的行为与用wen运算符调用时一样，</p> <p>只是当pattern是正则表达式室，他只返回pattern，不是在创建一个新的regexp对象</p> <p>test : 方法用于检测一个字符窜是否匹配某个模式</p> <p>用法：</p> <p>regExpObject.test(string)</p> <p>返回值： true  false</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token comment">// 检查输入手机号码是否正确</span>

<span class="token operator">/</span><span class="token operator">^</span><span class="token number">1</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token operator">|</span><span class="token number">4</span><span class="token operator">|</span><span class="token number">5</span><span class="token operator">|</span><span class="token number">7</span><span class="token operator">|</span><span class="token number">8</span><span class="token punctuation">]</span>\d<span class="token punctuation">{</span><span class="token number">9</span><span class="token punctuation">}</span>$<span class="token operator">/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>

<span class="token comment">// 返回true 或者false</span>



</code></pre></div><p>replace: 用于在字符窜中用一些字符替换另一些字符，或者替换一个与正则表达式匹配的子串</p> <p>语法：</p> <p>stringObject.replace(regexp/substr,replacement)</p> <p>regexp/substr 必需 规定子字符串或要替换的模式的regexp对象</p> <p>请注意，如果该值是一个字符串，则将它作为要检索的直接量文本模式，而不是首先被转换为regexp对象</p> <p>请注意， 无法传入变量</p> <p>返回值： 一个新的字符窜</p> <div class="language-js extra-class"><pre class="language-js"><code>
<span class="token comment">// 检测日期格式</span>

<span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 返回 Fri Mar 24 2017 16:16:19 GMT+0800 (中国标准时间)</span>


<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token string">&quot;2017年06月01日&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token string">&quot;2017年06月20日&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// 第一种</span>
<span class="token keyword">var</span> a1 <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;年&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;-&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;月&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;-&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">&quot;日&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span>
<span class="token comment">// 2017-06-01</span>

<span class="token comment">// 第二种</span>
<span class="token keyword">var</span> a1 <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/(\d{4}).(\d{1,2}).(\d{1,2}).+/mg</span><span class="token punctuation">,</span><span class="token string">'$1-$2-$3'</span><span class="token punctuation">)</span>
<span class="token comment">// 2017-06-01</span>

<span class="token comment">// 第三种</span>
Date<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'年'</span><span class="token punctuation">,</span><span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'月'</span><span class="token punctuation">,</span><span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'日'</span><span class="token punctuation">,</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">//第四种</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token string">&quot;2017年06月01日 10:10:10&quot;</span><span class="token punctuation">;</span>
a<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/(\d{4}).(\d{1,2}).(\d{1,2}).+ (\d{1,2}).(\d{1,2}).(\d{1,2})/mg</span><span class="token punctuation">,</span><span class="token string">'$1-$2-$3 $4:$5:$6'</span><span class="token punctuation">)</span>

Date<span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>a1<span class="token punctuation">)</span>
<span class="token comment">// 方法可解析一个日期时间字符窜，并返回毫秒数</span>
<span class="token comment">// 格式 ： 2017-01-02 或者 2017/01/01</span>
dateObject<span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token comment">// 结合date对象使用 返回一个毫秒数  dataObject   new Date()</span>



</code></pre></div><p>match : 可在字符窜内检索指定的值，或找到一个或者多个正则表达式的匹配</p> <p>语法：</p> <p>stringObject.match(searchvalue)  searchvalue 必需 规定要检索的字符串值</p> <p>stringObject.match(regexp)  regexp 必需 规定要匹配的模式的regexp对象。如果该参数不是regexp对象，则需要首先把它传递给regexp构造函数，将其转换为regexp对象</p> <p>返回值： 返回指定的值，而不是字符窜位置 （存放匹配结果的数组，该数组的内容依赖于regexp是否具有全局标志g）</p> <p>如果regexp没有g，那么match()方法就只能在stringObject中执行一次匹配。</p> <p>如果没有找到任何匹配的文本，match()将返回null。</p> <p>否则，它将返回一个数组，其中存放了与它找到的匹配文本有关信息。</p> <p>该数组的第0个元素存放的是匹配文本，而其余的元素存放的是</p> <p>与正则表达式的子表达式匹配的文本。</p> <p>除了这些常规的数组元素之外，返回的数组还含有两个对象属性。</p> <p>index属性声明的是匹配文本的起始字符在stringObject中的位置，</p> <p>input属性声明的是对stringObject的引用。</p> <p>如果regexp具有标志g，则match()方法将执行全局检索，找到</p> <p>stringObject中的所有匹配子字符窜。若没有找到任何匹配的子串，</p> <p>则返回null。如果找到了一个或者多个匹配子串，则返回一个数组。</p> <p>不过全局匹配返回的数组的内容与前者大不相同，它的数组元素中</p> <p>存放的是stringObject中所有的匹配子串，而且也没有index属性或者input属性</p> <p>注意：在全局检索模式下，match()既不提供与子表达式匹配的文本，也不声明每个匹配子</p> <p>串的位置。</p> <div class="language-js extra-class"><pre class="language-js"><code>
验证邮箱

<span class="token operator">/</span><span class="token operator">^</span><span class="token punctuation">(</span><span class="token punctuation">(</span>\w<span class="token punctuation">)</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token punctuation">[</span>\<span class="token punctuation">.</span>_<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>\w<span class="token punctuation">)</span><span class="token operator">+</span>@<span class="token punctuation">(</span><span class="token punctuation">(</span>\w<span class="token punctuation">)</span><span class="token operator">+</span><span class="token punctuation">(</span><span class="token punctuation">[</span>\<span class="token punctuation">.</span>_<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token punctuation">(</span>\w<span class="token punctuation">)</span><span class="token operator">+</span>\<span class="token punctuation">.</span><span class="token punctuation">[</span>a<span class="token operator">-</span>zA<span class="token operator">-</span><span class="token constant">Z</span><span class="token punctuation">]</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">}</span>$<span class="token operator">/</span>g<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&quot;ma.xio@ng_a@qq.com&quot;</span><span class="token punctuation">)</span>

验证一年的<span class="token number">12</span>个月：

<span class="token operator">^</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">?</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token operator">|</span><span class="token number">1</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>$ 正确格式为：“<span class="token number">01</span>”<span class="token operator">-</span>“<span class="token number">09</span>”和“<span class="token number">1</span>”“<span class="token number">12</span>” 
</code></pre></div><p>.toString(obj) 可以将所有的数据(类型)都转为字符窜，但是要排除null与undefined</p> <p>obj可以转化进制</p> <p>String(参数) 可以将null和undefined转换为字符窜，但没法转进制</p> <h1 id="js-原生-操作"><a href="#js-原生-操作" aria-hidden="true" class="header-anchor">#</a> js  原生 操作</h1> <ul><li>scrollWidth,clientWidth,offsetWidth的区别</li> <li>http://blog.csdn.net/u014374031/article/details/56011233</li> <li>http://www.cnblogs.com/fullhouse/archive/2012/01/16/2324131.html</li> <li>http://www.jb51.net/article/61460.htm</li></ul> <h3 id="修改于20170329"><a href="#修改于20170329" aria-hidden="true" class="header-anchor">#</a> 修改于20170329</h3> <p>var a = '5555[222]333'</p> <p>a.match(/[(.+?)]/g)  匹配中括号文字</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.6a1c7d67.js" defer></script><script src="/assets/js/2.63e202d5.js" defer></script><script src="/assets/js/44.48fcb2a1.js" defer></script>
  </body>
</html>
